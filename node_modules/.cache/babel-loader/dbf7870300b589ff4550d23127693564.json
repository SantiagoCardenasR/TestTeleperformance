{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { con } from \"./Mysql\";\nimport { useHistory } from 'react-router-dom';\nexport const initialState = {\n  users: []\n};\n\nfunction reducer(state, action) {\n  _s();\n\n  const history = useHistory();\n\n  switch (action.type) {\n    case 'ADD_USER':\n      con.connect(function (err) {\n        if (err) throw err;\n        console.log(\"Connected!\");\n        var sql = `INSERT INTO users (cc, name, country) VALUES ('${action.user.cc}', '${action.user.name}', '${action.user.country}')`;\n        con.query(sql, function (err, result) {\n          if (err) {\n            throw err;\n          } else {\n            history.push(\"/\");\n          }\n\n          ;\n        });\n      });\n      return { ...state,\n        users: [...state.users, action.user]\n      };\n\n    case 'UPDATE_USER':\n      let newUsers = [...state.users];\n      const index = state.users.findIndex(user => user.cc === action.cc);\n\n      if (index >= 0) {\n        newUsers[index].cc = action.user.cc;\n        newUsers[index].name = action.user.name;\n        newUsers[index].country = action.user.country;\n      }\n\n      return { ...state,\n        users: newUsers\n      };\n\n    case 'DELETE_USER':\n      let newUsersToDelete = [...state.users];\n      const deleteIndex = state.users.findIndex(user => user.cc === action.cc);\n\n      if (deleteIndex >= 0) {\n        newUsersToDelete.splice(deleteIndex, 1);\n      }\n\n      return { ...state,\n        users: newUsersToDelete\n      };\n\n    default:\n      return state;\n  }\n}\n\n_s(reducer, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n});\n\nexport default reducer;","map":{"version":3,"sources":["D:/XAMPP/htdocs/tptest/src/reducer.js"],"names":["con","useHistory","initialState","users","reducer","state","action","history","type","connect","err","console","log","sql","user","cc","name","country","query","result","push","newUsers","index","findIndex","newUsersToDelete","deleteIndex","splice"],"mappings":";;AAAA,SAAQA,GAAR,QAAkB,SAAlB;AACA,SAAQC,UAAR,QAA0B,kBAA1B;AACA,OAAO,MAAMC,YAAY,GAAG;AACzBC,EAAAA,KAAK,EAAE;AADkB,CAArB;;AAIP,SAASC,OAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EACA;AAAA;;AACI,QAAMC,OAAO,GAAGN,UAAU,EAA1B;;AAEA,UAAOK,MAAM,CAACE,IAAd;AAEI,SAAK,UAAL;AACIR,MAAAA,GAAG,CAACS,OAAJ,CAAY,UAASC,GAAT,EAAc;AACtB,YAAIA,GAAJ,EAAS,MAAMA,GAAN;AACTC,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,YAAIC,GAAG,GAAI,kDAAiDP,MAAM,CAACQ,IAAP,CAAYC,EAAG,OAAMT,MAAM,CAACQ,IAAP,CAAYE,IAAK,OAAMV,MAAM,CAACQ,IAAP,CAAYG,OAAQ,IAA5H;AACAjB,QAAAA,GAAG,CAACkB,KAAJ,CAAUL,GAAV,EAAe,UAAUH,GAAV,EAAeS,MAAf,EAAuB;AACpC,cAAIT,GAAJ,EAAS;AACL,kBAAMA,GAAN;AACD,WAFH,MAES;AACHH,YAAAA,OAAO,CAACa,IAAR,CAAa,GAAb;AACH;;AAAC;AAEL,SAPD;AAQH,OAZD;AAaA,aAAO,EAAC,GAAGf,KAAJ;AAAWF,QAAAA,KAAK,EAAE,CAAC,GAAGE,KAAK,CAACF,KAAV,EAAiBG,MAAM,CAACQ,IAAxB;AAAlB,OAAP;;AACJ,SAAK,aAAL;AACI,UAAIO,QAAQ,GAAG,CAAC,GAAGhB,KAAK,CAACF,KAAV,CAAf;AACA,YAAMmB,KAAK,GAAGjB,KAAK,CAACF,KAAN,CAAYoB,SAAZ,CAAuBT,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYT,MAAM,CAACS,EAAnD,CAAd;;AACA,UAAGO,KAAK,IAAI,CAAZ,EACA;AACID,QAAAA,QAAQ,CAACC,KAAD,CAAR,CAAgBP,EAAhB,GAAqBT,MAAM,CAACQ,IAAP,CAAYC,EAAjC;AACAM,QAAAA,QAAQ,CAACC,KAAD,CAAR,CAAgBN,IAAhB,GAAuBV,MAAM,CAACQ,IAAP,CAAYE,IAAnC;AACAK,QAAAA,QAAQ,CAACC,KAAD,CAAR,CAAgBL,OAAhB,GAA0BX,MAAM,CAACQ,IAAP,CAAYG,OAAtC;AACH;;AACD,aAAO,EAAC,GAAGZ,KAAJ;AAAWF,QAAAA,KAAK,EAAEkB;AAAlB,OAAP;;AACA,SAAK,aAAL;AACI,UAAIG,gBAAgB,GAAG,CAAC,GAAGnB,KAAK,CAACF,KAAV,CAAvB;AACA,YAAMsB,WAAW,GAAGpB,KAAK,CAACF,KAAN,CAAYoB,SAAZ,CAAuBT,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYT,MAAM,CAACS,EAAnD,CAApB;;AACA,UAAGU,WAAW,IAAI,CAAlB,EACA;AACID,QAAAA,gBAAgB,CAACE,MAAjB,CAAwBD,WAAxB,EAAqC,CAArC;AACH;;AACD,aAAO,EAAC,GAAGpB,KAAJ;AAAWF,QAAAA,KAAK,EAAEqB;AAAlB,OAAP;;AACR;AACI,aAAOnB,KAAP;AApCR;AAsCH;;GA1CQD,O;UAEWH,U;;;AA0CpB,eAAeG,OAAf","sourcesContent":["import {con} from \"./Mysql\";\r\nimport {useHistory } from 'react-router-dom'\r\nexport const initialState = {\r\n   users: [],\r\n};\r\n\r\nfunction reducer(state, action)\r\n{\r\n    const history = useHistory();\r\n\r\n    switch(action.type)\r\n    {\r\n        case 'ADD_USER':\r\n            con.connect(function(err) {\r\n                if (err) throw err;\r\n                console.log(\"Connected!\");\r\n                var sql = `INSERT INTO users (cc, name, country) VALUES ('${action.user.cc}', '${action.user.name}', '${action.user.country}')`;\r\n                con.query(sql, function (err, result) {\r\n                  if (err) {\r\n                      throw err\r\n                    } else {\r\n                        history.push(\"/\")\r\n                    } ;\r\n                  \r\n                });\r\n            });\r\n            return {...state, users: [...state.users, action.user], };\r\n        case 'UPDATE_USER':\r\n            let newUsers = [...state.users];\r\n            const index = state.users.findIndex((user) => user.cc === action.cc);\r\n            if(index >= 0)\r\n            {\r\n                newUsers[index].cc = action.user.cc;\r\n                newUsers[index].name = action.user.name;\r\n                newUsers[index].country = action.user.country;\r\n            } \r\n            return {...state, users: newUsers};\r\n            case 'DELETE_USER':\r\n                let newUsersToDelete = [...state.users];\r\n                const deleteIndex = state.users.findIndex((user) => user.cc === action.cc);\r\n                if(deleteIndex >= 0)\r\n                {\r\n                    newUsersToDelete.splice(deleteIndex, 1);\r\n                } \r\n                return {...state, users: newUsersToDelete};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;"]},"metadata":{},"sourceType":"module"}